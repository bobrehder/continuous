<!DOCTYPE html>
<html>
  <head>
    <title>Experiment</title>
    <script src="https://unpkg.com/jspsych@7.3.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-canvas-keyboard-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-canvas-slider-response"></script>
    <script src="https://unpkg.com/@jspsych/plugin-fullscreen@1.1.1"></script>
    <script src="https://unpkg.com/@jspsych/plugin-survey-multi-select"></script>
 	<link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css" />
 	<link rel="stylesheet" href="https://unpkg.com/@jspsych/plugin-survey@0.2.2/css/survey.css">
 	<style>
      h1   {font-weight: bold; font-size: 20px;}
      p    {text-align:  left;}
    </style>
	<script type="text/javascript">
	  function saveData(data){
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'file:///Users/bob/write_data.php'); 
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({filedata: data}));
      }
	  //initialize global jsPsych
	  var jsPsych = initJsPsych({
	    experiment_width: 800,
	    on_finish: function(){ saveData(jsPsych.data.get().csv()); }
	  });
	</script>
  </head>
  <body>
    <script type = "module">
      var timeline = []
      import { create_timeline } from './modules/experiment.js';
      create_timeline (timeline)
      // run experiment
      jsPsych.run(timeline)
    </script>
  </body>
</html>
